@page "/forgot-password"
@using System.ComponentModel.DataAnnotations
@inject ISnackbar Snackbar
@inject NavigationManager NavigationManager
@layout LoginLayout

<PageTitle>Forgot Password - F&B Reservation System</PageTitle>
<link href="css/login.css" rel="stylesheet" />

<div class="login-container">
    <MudPaper Class="login-card mx-auto" Elevation="3" Style="max-width: 500px;">
        <MudItem xs="12" Class="pa-8">
            <div class="d-flex flex-column">
                <MudText Typo="Typo.h5" Class="mb-1 primary-text">Reset Password</MudText>
                <MudDivider Class="primary-divider mb-4" Style="width: 60px; height: 2px;" />
                <MudText Typo="Typo.body2" Color="Color.Dark" Class="mb-6">
                    Enter your email address and we'll send you instructions to reset your password.
                </MudText>

                <EditForm Model="@resetModel" OnValidSubmit="@HandlePasswordReset" FormName="resetForm">
                    <DataAnnotationsValidator />
                    <div class="mb-4">
                        <MudTextField Label="Email Address" @bind-Value="resetModel.Email"
                                      Variant="Variant.Outlined"
                                      Adornment="Adornment.Start"
                                      AdornmentIcon="@Icons.Material.Filled.Email"
                                      AdornmentColor="Color.Primary" />
                    </div>

                    <div class="d-flex gap-3 mt-6">
                        <MudButton Variant="Variant.Outlined"
                                   Color="Color.Dark"
                                   FullWidth="true"
                                   OnClick="@(() => NavigationManager.NavigateTo("/login"))">
                            Back to Login
                        </MudButton>
                        <MudButton Variant="Variant.Filled"
                                   Color="Color.Primary"
                                   FullWidth="true"
                                   ButtonType="ButtonType.Submit">
                            Submit
                        </MudButton>
                    </div>
                </EditForm>
            </div>
        </MudItem>
    </MudPaper>
</div>

@code {
    private ResetPasswordModel resetModel = new ResetPasswordModel();

    private class ResetPasswordModel
    {
        [Required(ErrorMessage = "Email is required")]
        [EmailAddress(ErrorMessage = "Invalid email format")]
        public string Email { get; set; }
    }

    private void HandlePasswordReset()
    {
        // TODO: Implement actual password reset logic
        // This would typically involve:
        // 1. Verifying the email exists in your system
        // 2. Generating a reset token
        // 3. Sending an email with a reset link

        Snackbar.Add("Password reset instructions sent to your email", Severity.Success);
        NavigationManager.NavigateTo("/login");
    }
}