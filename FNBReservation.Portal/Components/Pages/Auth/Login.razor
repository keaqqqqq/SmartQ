@page "/Login"
@using System.ComponentModel.DataAnnotations
@inject ISnackbar Snackbar
@inject NavigationManager NavigationManager
@layout LoginLayout

<PageTitle>Login - F&B Reservation System</PageTitle>
<link href="css/login.css" rel="stylesheet" />

<div class="login-container d-flex justify-center align-center">
    <MudPaper Class="login-card mx-auto" Elevation="3">
        <MudGrid>
            <MudItem xs="12" md="6" Class="login-image-container px-0">
                <div class="food-image"></div>
            </MudItem>
            <MudItem xs="12" md="6" Class="pa-8">
                <div class="d-flex flex-column h-100">
                    <div class="mb-6 mt-3">
                        <MudText Typo="Typo.h4" Class="mb-1 primary-text">Hello!</MudText>
                        <MudText Typo="Typo.subtitle2" Color="Color.Dark">Sign in to continue</MudText>
                    </div>
                    <EditForm Model="@loginModel" OnValidSubmit="@HandleLogin" FormName="loginForm" Class="flex-grow-1 d-flex flex-column">
                        <DataAnnotationsValidator />
                        <div class="mb-4">
                            <MudTextField Label="Username or Staff ID" @bind-Value="loginModel.Username"
                                          Variant="Variant.Outlined"
                                          Adornment="Adornment.Start"
                                          AdornmentIcon="@Icons.Material.Filled.Person"
                                          AdornmentColor="Color.Primary" />
                        </div>
                        <div class="mb-3">
                            <MudTextField Label="Password" @bind-Value="loginModel.Password"
                                          Variant="Variant.Outlined"
                                          InputType="InputType.Password"
                                          Adornment="Adornment.Start"
                                          AdornmentIcon="@Icons.Material.Filled.Lock"
                                          AdornmentColor="Color.Primary" />
                        </div>
                        <div class="mb-1 mt-5 d-flex align-center">
                            <input type="checkbox" id="rememberMe" @bind="rememberMe" class="remember-checkbox" />
                            <label for="rememberMe" class="ml-2 remember-label">Remember me</label>
                        </div>
                        <MudButton Variant="Variant.Filled" Color="Color.Primary" Size="Size.Large" FullWidth="true"
                                   ButtonType="ButtonType.Submit" Class="mt-auto login-button">
                            Sign in
                            <MudIcon Icon="@Icons.Material.Filled.ArrowForward" Class="ml-2" />
                        </MudButton>
                    </EditForm>
                </div>
            </MudItem>
        </MudGrid>
    </MudPaper>
</div>


@code {
    private LoginModel loginModel = new LoginModel();
    private bool rememberMe = false;

    private class LoginModel
    {
        [Required(ErrorMessage = "Username is required")]
        public string Username { get; set; }

        [Required(ErrorMessage = "Password is required")]
        public string Password { get; set; }

        public bool RememberMe { get; set; }
    }

    private void HandleLogin()
    {
        loginModel.RememberMe = rememberMe;
        Snackbar.Add("Login successful", Severity.Success);
        StateHasChanged();
        NavigationManager.NavigateTo("/");
    }
}